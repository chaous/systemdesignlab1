# Лабораторная работа №2

## Описание

Данный проект представляет собой сервис управления проектами и задачами с поддержкой управления пользователями. Он включает в себя два основных сервиса:
- **Сервис управления пользователями** (создание, поиск по логину, поиск по маске имени и фамилии).
- **"Бизнес" сервис** управления проектами и задачами (создание проектов, создание задач, поиск проектов и задач).

Приложение реализовано с использованием фреймворка FastAPI и поддерживает аутентификацию с использованием JWT-токенов. Все данные хранятся в памяти, что упрощает тестирование и разработку.

### Основной функционал:
- **JWT-аутентификация**: Защищенные маршруты требуют авторизации пользователя с использованием токена.
- **CRUD операции для пользователей, проектов и задач**.

### Мастер-пользователь для тестирования:
- Логин: `admin`
- Пароль: `secret`

---

## Установка и запуск

### 1. Клонируйте репозиторий
   ```bash
   git clone https://github.com/chaous/systemdesignlab1.git
   cd lab2
   ```

### 2. Создайте виртуальное окружение и активируйте его
   ```bash
   python3 -m venv venv
   source venv/bin/activate   # Для Windows: venv\Scripts\activate
   ```

### 3. Установите зависимости
   Убедитесь, что файл `requirements.txt` присутствует в корне папки `lab2`. Установите зависимости командой:
   ```bash
   pip install -r requirements.txt
   ```

### 4. Запустите сервер
   Используйте правильное имя файла `lab2_system_design.py`:
   ```bash
   uvicorn lab2_system_design:app --reload
   ```

5. Откройте браузер и перейдите по ссылке:
   - [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs) для просмотра и тестирования API.

---

## JWT Аутентификация

Для использования защищенных маршрутов (например, создание проектов и задач) требуется аутентификация через JWT. Для этого нужно пройти аутентификацию и получить токен, который будет использоваться в запросах.

### Получение токена
- **POST /token**: Аутентификация и получение JWT-токена.

Пример запроса:
```bash
curl -X 'POST' \
  'http://127.0.0.1:8000/token' \
  -H 'Content-Type: application/x-www-form-urlencoded' \
  -d 'username=admin&password=secret'
```

Токен будет использоваться для аутентификации в других запросах через заголовок:
```bash
-H "Authorization: Bearer <JWT_TOKEN>"
```

---

## API Маршруты

### Управление пользователями
- **POST /users/** - Создание нового пользователя.
- **GET /users/{username}** - Получение пользователя по логину.

Пример создания пользователя:
```bash
curl -X 'POST' \
  'http://127.0.0.1:8000/users/' \
  -H 'Authorization: Bearer <JWT_TOKEN>' \
  -H 'Content-Type: application/json' \
  -d '{
    "username": "newuser",
    "full_name": "New User",
    "email": "newuser@example.com",
    "password": "password123"
  }'
```

### Управление проектами
- **POST /projects/** - Создание нового проекта.
- **GET /projects/{project_name}** - Поиск проекта по имени.

Пример создания проекта:
```bash
curl -X 'POST' \
  'http://127.0.0.1:8000/projects/' \
  -H 'Authorization: Bearer <JWT_TOKEN>' \
  -H 'Content-Type: application/json' \
  -d '{
    "name": "Project A",
    "description": "Описание проекта A",
    "owner": "admin"
  }'
```

### Управление задачами
- **POST /tasks/** - Создание новой задачи.
- **GET /projects/{project_name}/tasks/** - Получение всех задач проекта.

Пример создания задачи:
```bash
curl -X 'POST' \
  'http://127.0.0.1:8000/tasks/' \
  -H 'Authorization: Bearer <JWT_TOKEN>' \
  -H 'Content-Type: application/json' \
  -d '{
    "title": "Task 1",
    "description": "Описание задачи 1",
    "project": "Project A",
    "assigned_to": "admin"
  }'
```

---

## Нефункциональные требования

1. **Производительность**: 
   - Все запросы должны выполняться в течение 2 секунд.
  
2. **Безопасность**: 
   - Доступ к защищенным маршрутам возможен только при наличии JWT-токена.

3. **Надежность**: 
   - Система поддерживает минимальную потерю данных благодаря использованию памяти для хранения данных.

4. **Масштабируемость**: 
   - Система легко масштабируется для больших объемов данных при необходимости подключения базы данных.

---

## Автор

Илья Рожков

---
